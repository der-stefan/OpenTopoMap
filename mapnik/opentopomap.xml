<?xml version="1.0" encoding="utf-8"?>
<!-- TODO:
	- symbols: move non-centrical symbols and text
	- label positions places
	- railway bridges for others than simple rails
	- generalize rivers
	- generalize cities and admin_centre
	- subway stations and subway overground rails
-->
<!DOCTYPE Map
[
	<!ENTITY basemap-relief SYSTEM "styles-otm/basemap-relief.xml">
	<!ENTITY landuse-lowzoom SYSTEM "styles-otm/landuse-lowzoom.xml">
	<!ENTITY landuse SYSTEM "styles-otm/landuse.xml">
	<!ENTITY landuse-over-hillshade SYSTEM "styles-otm/landuse-over-hillshade.xml">
	<!ENTITY hillshade SYSTEM "styles-otm/hillshade.xml">
	<!ENTITY basemap-sea SYSTEM "styles-otm/basemap-sea.xml">
	<!ENTITY water-casing-lowzoom SYSTEM "styles-otm/water-casing-lowzoom.xml">
	<!ENTITY water-fill-lowzoom SYSTEM "styles-otm/water-fill-lowzoom.xml">
	<!ENTITY waterway-lines-lowzoom SYSTEM "styles-otm/waterway-lines-lowzoom.xml">
	<!ENTITY waterway-lines SYSTEM "styles-otm/waterway-lines.xml">
	<!ENTITY waterway-polygons-casing SYSTEM "styles-otm/waterway-polygons-casing.xml">
	<!ENTITY waterway-polygons-fill SYSTEM "styles-otm/waterway-polygons-fill.xml">
	<!ENTITY water-areas SYSTEM "styles-otm/water-areas.xml">
	<!ENTITY landuse-over-water SYSTEM "styles-otm/landuse-over-water.xml">
	<!ENTITY water-weir SYSTEM "styles-otm/water-weir.xml">
	<!ENTITY waterway-arrows SYSTEM "styles-otm/waterway-arrows.xml">
	<!ENTITY tunnels-casing SYSTEM "styles-otm/tunnels-casing.xml">
	<!ENTITY tunnels-fill SYSTEM "styles-otm/tunnels-fill.xml">
	<!ENTITY tunnels-middle SYSTEM "styles-otm/tunnels-middle.xml">
	<!ENTITY cliffs SYSTEM "styles-otm/cliffs.xml">
	<!ENTITY buildings SYSTEM "styles-otm/buildings.xml">
	<!ENTITY military SYSTEM "styles-otm/military.xml">
	<!ENTITY contours SYSTEM "styles-otm/contours.xml">
	<!ENTITY borders-lowzoom SYSTEM "styles-otm/borders-lowzoom.xml">
	<!ENTITY borders SYSTEM "styles-otm/borders.xml">
	<!ENTITY railways-lowzoom SYSTEM "styles-otm/railways-lowzoom.xml">
	<!ENTITY railways-embankment SYSTEM "styles-otm/railways-embankment.xml">
	<!ENTITY railways SYSTEM "styles-otm/railways.xml">
	<!ENTITY airports-casing SYSTEM "styles-otm/airports-casing.xml">
	<!ENTITY airports-fill SYSTEM "styles-otm/airports-fill.xml">
	<!ENTITY roads-casing-lowzoom SYSTEM "styles-otm/roads-casing-lowzoom.xml">
	<!ENTITY roads-fill-lowzoom SYSTEM "styles-otm/roads-fill-lowzoom.xml">
	<!ENTITY roads-casing SYSTEM "styles-otm/roads-casing.xml">
	<!ENTITY roads-fill SYSTEM "styles-otm/roads-fill.xml">
	<!ENTITY housenumbers SYSTEM "styles-otm/housenumbers.xml">
	<!ENTITY road-names-text SYSTEM "styles-otm/road-names-text.xml">
	<!ENTITY symbols-road SYSTEM "styles-otm/symbols-road.xml">
	<!ENTITY ferry-routes SYSTEM "styles-otm/ferry-routes.xml">
	<!ENTITY railway-bridges-casing SYSTEM "styles-otm/railway-bridges-casing.xml">
	<!ENTITY railway-bridges SYSTEM "styles-otm/railway-bridges.xml">
	<!ENTITY bridges-casing SYSTEM "styles-otm/bridges-casing.xml">
	<!ENTITY bridges-fill SYSTEM "styles-otm/bridges-fill.xml">
	<!ENTITY bridges-middle SYSTEM "styles-otm/bridges-middle.xml">
	<!ENTITY powerlines SYSTEM "styles-otm/powerlines.xml">
	<!ENTITY powertowers SYSTEM "styles-otm/powertowers.xml">
	<!ENTITY barriers SYSTEM "styles-otm/barriers.xml">
	<!ENTITY motorway_junctions SYSTEM "styles-otm/motorway_junctions.xml">
	<!ENTITY admin_centers SYSTEM "styles-otm/admin_centers.xml">
	<!ENTITY text-capitals SYSTEM "styles-otm/text-capitals.xml">
	<!ENTITY text-cities SYSTEM "styles-otm/text-cities.xml">
	<!ENTITY text-towns SYSTEM "styles-otm/text-towns.xml">
	<!ENTITY text-villages SYSTEM "styles-otm/text-villages.xml">
	<!ENTITY text-natural-poly-lowzoom SYSTEM "styles-otm/text-natural-poly-lowzoom.xml">
	<!ENTITY text-natural-poly SYSTEM "styles-otm/text-natural-poly.xml">
	<!ENTITY text-natural-point SYSTEM "styles-otm/text-natural-point.xml">
	<!ENTITY symbols-1 SYSTEM "styles-otm/symbols-1.xml">
	<!ENTITY symbols-2 SYSTEM "styles-otm/symbols-2.xml">
	<!ENTITY symbols-poly SYSTEM "styles-otm/symbols-poly.xml">
	<!ENTITY symbols-point SYSTEM "styles-otm/symbols-point.xml">
	<!ENTITY text-roads-ref SYSTEM "styles-otm/text-roads-ref.xml">
	<!ENTITY text-waterways SYSTEM "styles-otm/text-waterways.xml">
	
	<!ENTITY test SYSTEM "styles-otm/test.xml">
	
	<!ENTITY % entities SYSTEM "inc/entities.xml.inc">
	%entities;     
]>

<!-- background-color:
	zoom 0...8: #117803
	zoom 9+: e0e0e0
-->
<Map background-color="#e0e0e0" srs="+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs +over" buffer-size="256">
	<!-- style definitions -->
	&landuse-lowzoom;
	&landuse;
	&landuse-over-hillshade;
	&water-casing-lowzoom;
	&water-fill-lowzoom;
	&waterway-lines-lowzoom;
	&waterway-lines;
	&waterway-polygons-casing;
	&waterway-polygons-fill;
	&water-areas;
	&landuse-over-water;
	&water-weir;
	&waterway-arrows;
	&tunnels-casing;
	&tunnels-fill;
	&tunnels-middle;
	&cliffs;
	&buildings;
	&military;
	&contours;
	&borders-lowzoom;
	&borders;
	&railways-lowzoom;
	&railways-embankment;
	&railways;
	&airports-casing;
	&airports-fill;
	&roads-casing-lowzoom;
	&roads-fill-lowzoom;
	&roads-casing;
	&roads-fill;
	&symbols-road;
	&housenumbers;
	&ferry-routes;
	&railway-bridges-casing;
	&railway-bridges;
	&road-names-text;
	&bridges-casing;
	&bridges-fill;
	&bridges-middle;
	&powerlines;
	&powertowers;
	&barriers;
	&motorway_junctions;
	&admin_centers;
	&text-capitals;
	&text-cities;
	&text-towns;
	&text-villages;
	&text-natural-poly-lowzoom;
	&text-natural-poly;
	&text-natural-point;
	&symbols-1;
	&symbols-2;
	&symbols-poly;
	&symbols-point;
	&text-roads-ref;
	&text-waterways;
	
	&test;

	<!-- layers -->
	
	&basemap-relief;
	
	<Layer name="landuse-lowzoom">
		<StyleName>landuse-lowzoom</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/preprocessed/landuse-lowzoom/landuse-lowzoom</Parameter>
		</Datasource>
	</Layer>
	
	<Layer name="landuse">
		<StyleName>landuse</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,way_area,landuse,leisure,"natural",wetland,wood,amenity FROM &prefix;_polygon ORDER BY (CASE WHEN landuse='forest' THEN 0 ELSE 1 END) asc) AS landuse </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	&hillshade;
	
	<Layer name="landuse-over-hillshade">
		<StyleName>landuse-over-hillshade</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,landuse,"natural",wood,amenity FROM &prefix;_polygon) AS landuse </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	&basemap-sea;
	
	<Layer name="water-lowzoom">
		<StyleName>water-casing-lowzoom</StyleName>
		<StyleName>water-fill-lowzoom</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/preprocessed/water-lowzoom/water-lowzoom</Parameter>
		</Datasource>
	</Layer>
	
	<!--<Layer name="waterway-lines-lowzoom">
		<StyleName>waterway-lines-lowzoom</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/test/waterways-test</Parameter>
		</Datasource>
	</Layer>-->
	
	<Layer name="waterway-lines">
		<StyleName>waterway-lines</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"CEMT",intermittent,motorboat,tunnel,waterway FROM &prefix;_line) AS water </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>

	<Layer name="water-polygons">
		<StyleName>waterway-polygons-casing</StyleName>
		<StyleName>waterway-polygons-fill</StyleName>
		<StyleName>water-areas</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"CEMT",motorboat,"natural",landuse,leisure,waterway,way_area FROM &prefix;_polygon) AS water </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="landuse-over-water">
		<StyleName>landuse-over-water</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural",wetland FROM &prefix;_polygon) AS landuse </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>

	<Layer name="water-weir-arrows">
		<StyleName>water-weir</StyleName>
		<StyleName>waterway-arrows</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,waterway,intermittent FROM &prefix;_line) AS water </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="tunnels">
		<StyleName>tunnels-casing</StyleName>
		<StyleName>tunnels-fill</StyleName>
		<StyleName>tunnels-middle</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,highway,service,tracktype,ST_Length(way) AS length FROM &prefix;_line WHERE (tunnel = 'yes') AND highway IS NOT NULL) AS roads </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="cliffs-lines">
		<StyleName>cliffs</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"natural","man_made",highway FROM &prefix;_line) AS cliff </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	<Layer name="cliffs-polygons">
		<StyleName>cliffs</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,area,"natural","man_made",NULL AS highway FROM &prefix;_polygon WHERE (area != 'yes')) AS cliff </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="buildings">
		<StyleName>buildings</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,building,leisure,railway,amenity,aeroway FROM &prefix;_polygon WHERE (building IS NOT NULL AND building != 'no') OR (aeroway = 'terminal')) AS buildings </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="military">
		<StyleName>military</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,landuse FROM &prefix;_polygon WHERE (landuse = 'military')) AS landuse </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<!-- contours -->
	<!--<Layer name="contours">
		<StyleName>contours</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ele FROM &prefix;_line) AS contours </Parameter>
			<Parameter name="type">postgis</Parameter>
			<Parameter name="dbname">contours</Parameter>
		</Datasource>
	</Layer>-->
	<Layer name="contours">
		<StyleName>contours</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">../../contours_test/contours_48-10</Parameter>
		</Datasource>
	</Layer>
	<Layer name="contours">
		<StyleName>contours</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">../../contours_test/contours_48-11</Parameter>
		</Datasource>
	</Layer>
	<Layer name="contours">
		<StyleName>contours</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">../../contours_test/contours_49-10</Parameter>
		</Datasource>
	</Layer>
	<Layer name="contours">
		<StyleName>contours</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">../../contours_test/contours_49-11</Parameter>
		</Datasource>
	</Layer>
	<Layer name="contours">
		<StyleName>contours</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">../../contours_test/contours_50-10</Parameter>
		</Datasource>
	</Layer>
	<Layer name="contours">
		<StyleName>contours</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">../../contours_test/contours_50-11</Parameter>
		</Datasource>
	</Layer>
	
	<Layer name="borders-lowzoom">
		<StyleName>borders-lowzoom</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/preprocessed/borders-lowzoom/borders-lowzoom</Parameter>
		</Datasource>
	</Layer>
	
	<Layer name="borders">
		<StyleName>borders</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,boundary,admin_level,name FROM &prefix;_line WHERE boundary IN ('administrative')) AS borders </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="railways-lowzoom">
		<StyleName>railways-lowzoom</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/preprocessed/railways-lowzoom/railways-lowzoom</Parameter>
		</Datasource>
	</Layer>
	
	<Layer name="railways">
		<StyleName>railways-embankment</StyleName>
		<StyleName>railways</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,railway,tunnel,embankment,service FROM &prefix;_line WHERE railway IS NOT NULL) AS railways </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>

	<Layer name="airports">
		<StyleName>airports-casing</StyleName>
		<StyleName>airports-fill</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,aeroway FROM &prefix;_line WHERE aeroway IS NOT NULL) AS airports </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="roads-lowzoom">
		<StyleName>roads-casing-lowzoom</StyleName>
		<StyleName>roads-fill-lowzoom</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/preprocessed/roads-lowzoom/roads-lowzoom</Parameter>
		</Datasource>
	</Layer>
	
	<Layer name="roads">
		<StyleName>roads-casing</StyleName>
		<StyleName>roads-fill</StyleName>
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,highway,name,service,surface,tracktype,lanes,embankment FROM &prefix;_line WHERE (!scale_denominator! &gt; 300000) OR ((bridge IS NULL OR bridge != 'yes') AND (tunnel IS NULL OR tunnel != 'yes')) AND highway IS NOT NULL ORDER BY (CASE WHEN highway IN ('motorway','trunk') THEN 5 WHEN highway='primary' THEN 1 WHEN highway='secondary' THEN 2 WHEN highway='tertiary' THEN 3 ELSE 4 END) DESC ) AS roads</Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="symbols-road">
		<StyleName>symbols-road</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,access,fee,amenity,highway FROM &prefix;_polygon) AS symbols </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="building-housenumbers-points">
		<StyleName>housenumbers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"addr:housenumber",name,building FROM &prefix;_point WHERE "addr:housenumber" IS NOT NULL) AS housenumbers </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	<Layer name="building-housenumbers-polygons">
		<StyleName>housenumbers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,"addr:housenumber",name,building FROM &prefix;_polygon WHERE building IS NOT NULL) AS housenumbers </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="ferry-routes">
		<StyleName>ferry-routes</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,route FROM &prefix;_line) AS route </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="railway-bridges">
		<StyleName>railway-bridges-casing</StyleName>
		<StyleName>railway-bridges</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,railway,layer FROM &prefix;_line WHERE (bridge = 'yes') AND (railway IS NOT NULL) AND (layer IS NULL OR layer &lt;= '1')) AS railways </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	<Layer name="railway-bridges-layer2" group-by="layer">
		<StyleName>railway-bridges-casing</StyleName>
		<StyleName>railway-bridges</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,railway,layer FROM &prefix;_line WHERE (bridge = 'yes') AND (railway IS NOT NULL) AND (layer &gt; '1')) AS railways </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="bridges">
		<StyleName>bridges-casing</StyleName>
		<StyleName>bridges-fill</StyleName>
		<StyleName>bridges-middle</StyleName>
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,service,surface,tracktype,layer,name,railway FROM &prefix;_line WHERE (bridge = 'yes') AND (highway IS NOT NULL OR railway = 'tram') AND (layer IS NULL OR layer &lt;= '1')) AS roads </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>

	<Layer name="bridges-layer2">
		<StyleName>bridges-casing</StyleName>
		<StyleName>bridges-fill</StyleName>
		<StyleName>bridges-middle</StyleName>
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,service,surface,tracktype,layer,name,railway FROM &prefix;_line WHERE (bridge = 'yes') AND (highway IS NOT NULL OR railway = 'tram') AND (layer = '2')) AS roads </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>

	<Layer name="bridges-layer3" group-by="layer">
		<StyleName>bridges-casing</StyleName>
		<StyleName>bridges-fill</StyleName>
		<StyleName>bridges-middle</StyleName>
		<StyleName>road-names-text</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,ST_Length(way) AS length,highway,service,surface,tracktype,layer,name,railway FROM &prefix;_line WHERE (bridge = 'yes') AND (highway IS NOT NULL OR railway = 'tram') AND (layer &gt; '2')) AS roads </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="powerlines">
		<StyleName>powerlines</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,power,voltage FROM &prefix;_line) AS powerlines </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	<Layer name="powertowers">
		<StyleName>powertowers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,power FROM &prefix;_point WHERE power IN ('tower','pole')) AS powertowers </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="barriers-poly">
		<StyleName>barriers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,barrier,fenced,ST_Perimeter(way) AS length FROM &prefix;_polygon) AS barriers </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	<Layer name="barriers-line">
		<StyleName>barriers</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,barrier,fenced,ST_Length(way) AS length FROM &prefix;_line) AS barriers </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<!--<Layer name="motorway_junctions">
		<StyleName>motorway_junctions</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way FROM &prefix;_point WHERE (highway = 'motorway_junction')) AS junction </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>-->
	
	<!--<Layer name="admin_centers">
		<StyleName>admin_centers</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/admin_centers/admin_centers</Parameter>
		</Datasource>
	</Layer>-->
	
	<Layer name="text" clear-label-cache="on">
		<StyleName>text-capitals</StyleName>
		<StyleName>text-cities</StyleName>
		<StyleName>text-towns</StyleName>
		<StyleName>text-villages</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,admin_level,name,capital,'('&#124;&#124;substring(ele from '^[\d]+')&#124;&#124;')' as ele,place,population::INTEGER FROM &prefix;_point WHERE place IN ('city','town','village','suburb','hamlet','isolated_dwelling','locality') AND (population IS NULL OR population SIMILAR TO '[[:digit:]]+') ORDER BY (CASE WHEN place='city' THEN 0 WHEN place='town' THEN 1 WHEN place='village' THEN 2 ELSE 3 END) asc, (CASE WHEN population IS NUll THEN 0 WHEN population similar to '[[:digit:]]+' THEN population::integer ELSE 0 END) desc
		  ) AS names</Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="text-natural-poly-lowzoom">
		<StyleName>text-natural-poly-lowzoom</StyleName>
		<Datasource>
			<Parameter name="type">shape</Parameter>
			<Parameter name="file">data/preprocessed/water-lowzoom/water-lowzoom</Parameter>
		</Datasource>
	</Layer>
	
	<Layer name="text-natural-poly">
		<StyleName>text-natural-poly</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,name,"natural",way_area FROM &prefix;_polygon) AS names</Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>

	<Layer name="text-natural-point">
		<StyleName>text-natural-point</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,name,"natural",ele FROM &prefix;_point) AS names</Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="symbols-poly">
		<StyleName>symbols-1</StyleName>
		<StyleName>symbols-2</StyleName>
		<StyleName>symbols-poly</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,access,amenity,highway,historic,"memorial:type",castle_type,religion,denomination,denotation,NULL AS fee,"man_made","tower:type","communication:radio","communication:television",building,"natural",name,ruins,NULL AS "summit:cross",tourism,"power","generator:source","site_type",sport,type,disused,abandoned,railway,way_area FROM &prefix;_polygon) AS symbols </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>

	<Layer name="symbols-point">
		<StyleName>symbols-1</StyleName>
		<StyleName>symbols-2</StyleName>
		<StyleName>symbols-point</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,access,amenity,highway,historic,"memorial:type",castle_type,religion,denomination,denotation,NULL AS fee,"man_made","tower:type","communication:radio","communication:television",building,"natural",name,ruins,"summit:cross",tourism,"power","generator:source","site_type",sport,type,disused,abandoned,railway FROM &prefix;_point) AS symbols </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="text-roads-ref">
		<StyleName>text-roads-ref</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,highway,ref FROM &prefix;_line WHERE (ST_Length(way)::integer &gt; 1000) AND ref IS NOT NULL) AS roads </Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<Layer name="text-waterways">
		<StyleName>text-waterways</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,name,waterway FROM &prefix;_line) AS names</Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>
	
	<!--<Layer name="test">
		<StyleName>test</StyleName>
		<Datasource>
			<Parameter name="table">(SELECT way,direction,tourism FROM &prefix;_point WHERE tourism = 'viewpoint') AS test</Parameter>
			&datasource-settings;
		</Datasource>
	</Layer>-->
	
	
</Map>

<!--
macros:
	!scale_denominator!
	!bbox!
-->
